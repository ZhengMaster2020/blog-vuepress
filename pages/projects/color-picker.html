<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于 Vue 的颜色选择器 | 资料库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="../assets/images/book-pro.png">
    <meta name="description" content="这是一个关于书籍的资料库， 前后端以及各种领域文学的知识、资料分享库">
    
    <link rel="preload" href="/assets/css/0.styles.e82c39d8.css" as="style"><link rel="preload" href="/assets/js/app.f276fa7e.js" as="script"><link rel="preload" href="/assets/js/2.9e11fcbd.js" as="script"><link rel="preload" href="/assets/js/5.2aa81deb.js" as="script"><link rel="prefetch" href="/assets/js/10.887985f7.js"><link rel="prefetch" href="/assets/js/11.6ab565dd.js"><link rel="prefetch" href="/assets/js/12.727376aa.js"><link rel="prefetch" href="/assets/js/13.5b9e6969.js"><link rel="prefetch" href="/assets/js/14.fcd7bc07.js"><link rel="prefetch" href="/assets/js/15.d61c7000.js"><link rel="prefetch" href="/assets/js/16.3627a097.js"><link rel="prefetch" href="/assets/js/17.908d1bda.js"><link rel="prefetch" href="/assets/js/18.448504a0.js"><link rel="prefetch" href="/assets/js/19.99a2cf53.js"><link rel="prefetch" href="/assets/js/20.08c7450e.js"><link rel="prefetch" href="/assets/js/21.dba360d0.js"><link rel="prefetch" href="/assets/js/22.6555cb12.js"><link rel="prefetch" href="/assets/js/23.9f2c6b5d.js"><link rel="prefetch" href="/assets/js/24.808628ce.js"><link rel="prefetch" href="/assets/js/25.af8c6c26.js"><link rel="prefetch" href="/assets/js/26.f834e85b.js"><link rel="prefetch" href="/assets/js/3.0b92bb4b.js"><link rel="prefetch" href="/assets/js/4.8360c816.js"><link rel="prefetch" href="/assets/js/6.702cca5c.js"><link rel="prefetch" href="/assets/js/7.ba307d60.js"><link rel="prefetch" href="/assets/js/8.8a8aec11.js"><link rel="prefetch" href="/assets/js/9.ba7569dc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e82c39d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">资料库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/books/" class="nav-link">
  书籍
</a></div><div class="nav-item"><a href="/pages/techolo/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/pages/material/" class="nav-link">
  资料
</a></div><div class="nav-item"><a href="/pages/projects/" class="nav-link router-link-active">
  项目
</a></div> <a href="https://github.com/ZhengMaster2020/material-depot" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/books/" class="nav-link">
  书籍
</a></div><div class="nav-item"><a href="/pages/techolo/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/pages/material/" class="nav-link">
  资料
</a></div><div class="nav-item"><a href="/pages/projects/" class="nav-link router-link-active">
  项目
</a></div> <a href="https://github.com/ZhengMaster2020/material-depot" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>常用组件以及练手项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/projects/color-picker.html" aria-current="page" class="active sidebar-link">基于 Vue 的颜色选择器</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="基于-vue-的颜色选择器"><a href="#基于-vue-的颜色选择器" class="header-anchor">#</a> 基于 Vue 的颜色选择器</h1> <blockquote><p>背景：在开发后台系统的过程中，需要用到颜色选择器组件，而这个项目是基于没有<code>颜色选择器组件</code>的<a href="https://2x.antdv.com/components/overview/" target="_blank" rel="noopener noreferrer">AntDesignVue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的 UI 框架进行开发的， 所以参照了<a href="https://www.iviewui.com/components/color-picker" target="_blank" rel="noopener noreferrer">View UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的颜色选择器组件的源码进行了一个基于 Vue 框架的颜色选择器组件的封装， 让这个颜色选择组件脱离框架的限制。</p></blockquote> <p><img src="/assets/img/color-picker.3eac0660.gif" alt="img loading error"></p> <h3 id="实现思路"><a href="#实现思路" class="header-anchor">#</a> 实现思路</h3> <ul><li><p>首先需要有颜色显示的小方块，提供一个颜色选择的入口</p></li> <li><p>通过入口，打开一个颜色面板，面板的主要内容有四大部分内容：顶部是左侧显示用户当先选择的颜色，右侧显示<code>默认颜色</code>按钮的快捷键 （自定义默认颜色）</p></li> <li><p>中间的分为<code>主题颜色</code>区域以及<code>标准颜色</code>区域，主要是提供给用户常见的颜色选择快捷项</p></li> <li><p>底部的<code>更多颜色</code>是提供三种颜色值格式：<code>HEX</code>、<code>RGB</code>、 <code>HSL</code>，让用户自定义颜色值</p></li></ul> <h3 id="实现步骤"><a href="#实现步骤" class="header-anchor">#</a> 实现步骤</h3> <ul><li><p>布局</p> <ul><li><p>实现入口小方块样式</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAABKCAYAAACIGqnGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEwSURBVHhe7dwhDsNAEATB/P+xxyxDJ+YGkYyut1YqOqzpfn53ATHHcV5Ai7AhSNgQJGwIEjYECRuChA1BwoYgYUOQsCFI2BAkbAgSNgQJG4KEDUHChiBhQ5CwIUjYECRsCBJ21Frrtadd9iDsqDvMx++VfxL23oQdJezZhB0l7NmEHSXs2YQdJezZhB0l7NmEHSXs2YQdJezZhB0l7NmEHSXs2YQdJezZhB0l7NmEHSXs2YQdJezZhB0l7NmEHXWH+dbTLnsQNgQJG4KEDUHChiBhQ5CwIUjYECRsCBI2BAkbgoQNQcKGIGFDkLAhSNgQJGwIEjYECRuChA1BwoYgYUOQsCFI2BAkbAgSNgQJG4KEDUHChiBhQ5CwIUjYECRsCBI2BAkbgoQNQcKGnPP6Av+hSpyzlhaTAAAAAElFTkSuQmCC" alt="error"></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ColorPicker.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 颜色选择入口 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnStyle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 颜色选择面板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 自定入口按钮样式</span>
      btnStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.zs-color-picker</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token selector">;

  ul,
  li,
  ol</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">// 入口按钮， 默认宽高位15px
  &amp;-btn</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <ul><li><p>在实现入口小方块的基础上继续完成颜色面板布局与样式
<img src="data:image/png;base64,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" alt="error"></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ColorPicker.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 颜色选择入口 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnStyle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 颜色选择面板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
        <span class="token punctuation">'</span>zs-color-picker-panel<span class="token punctuation">'</span>,
        visible ? <span class="token punctuation">'</span>zs-color-picker-panel__visible<span class="token punctuation">'</span> : <span class="token punctuation">'</span><span class="token punctuation">'</span>,
      ]<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-view<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #000</span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>默认颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>主题颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: <span class="token punctuation">'</span>#0081e9<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>standard-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>标准颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>更多颜色...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      visible<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 自定入口按钮样式</span>
      btnStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.zs-color-picker</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token selector">;

  ul,
  li,
  ol</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">// 入口按钮， 默认宽高位15px
  &amp;-btn</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">// 颜色面板 初始状态隐藏
  &amp;-panel</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 190px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
    <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box<span class="token selector">;

    h3</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">input</span> <span class="token punctuation">{</span>
      <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.panel-header</span> <span class="token punctuation">{</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 29px<span class="token selector">;
      .color-view</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
        <span class="token property">transition</span><span class="token punctuation">:</span> background-color 0.3s ease<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.default-color</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
        <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.panel-main</span> <span class="token punctuation">{</span>
      <span class="token selector">.theme-color</span> <span class="token punctuation">{</span>
        <span class="token selector">li</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
          <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
          <span class="token property">margin</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span>
          <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span>
          <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">li:hover</span> <span class="token punctuation">{</span>
          <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.standard-color</span> <span class="token punctuation">{</span>
        <span class="token selector">li</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
          <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
          <span class="token property">margin</span><span class="token punctuation">:</span> 0 2px<span class="token selector">;
          li</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
            <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">li:hover</span> <span class="token punctuation">{</span>
            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token selector">// 颜色面板显示状态
  &amp;-panel__visible</span> <span class="token punctuation">{</span>
    <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul> <ul><li><p>逻辑</p> <ul><li><p>通过<code>Vue</code>的自定义指令，编写一个工具函数来阻止默认事件，通过这个函数使得我们只触发父元素的事件，其子元素的事件阻止被触发</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// utils.js</span>
<span class="token keyword">const</span> nodeList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token string">'@@clickoutsideContext'</span>

<span class="token keyword">let</span> startClick
<span class="token keyword">let</span> seed <span class="token operator">=</span> <span class="token number">0</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>startClick <span class="token operator">=</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  nodeList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> node<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">documentHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> startClick<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">createDocumentHandler</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mouseup <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> mousedown <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span>vnode <span class="token operator">||</span>
      <span class="token operator">!</span>vnode<span class="token punctuation">.</span>context <span class="token operator">||</span>
      <span class="token operator">!</span>mouseup<span class="token punctuation">.</span>target <span class="token operator">||</span>
      <span class="token operator">!</span>mousedown<span class="token punctuation">.</span>target <span class="token operator">||</span>
      el<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>mouseup<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">||</span>
      el<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>mousedown<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">||</span>
      el <span class="token operator">===</span> mouseup<span class="token punctuation">.</span>target <span class="token operator">||</span>
      <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>context<span class="token punctuation">.</span>popperElm <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>context<span class="token punctuation">.</span>popperElm<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>mouseup<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">||</span>
          vnode<span class="token punctuation">.</span>context<span class="token punctuation">.</span>popperElm<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>mousedown<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
      <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      binding<span class="token punctuation">.</span>expression <span class="token operator">&amp;&amp;</span>
      el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>methodName <span class="token operator">&amp;&amp;</span>
      vnode<span class="token punctuation">.</span>context<span class="token punctuation">[</span>el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>methodName<span class="token punctuation">]</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vnode<span class="token punctuation">.</span>context<span class="token punctuation">[</span>el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>methodName<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>bindingFn <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bindingFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自定义指令 - 点击元素外面才会触发的事件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nodeList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> seed<span class="token operator">++</span>
    el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">,</span>
      documentHandler<span class="token operator">:</span> <span class="token function">createDocumentHandler</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">,</span>
      methodName<span class="token operator">:</span> binding<span class="token punctuation">.</span>expression<span class="token punctuation">,</span>
      bindingFn<span class="token operator">:</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>documentHandler <span class="token operator">=</span> <span class="token function">createDocumentHandler</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>methodName <span class="token operator">=</span> binding<span class="token punctuation">.</span>expression
    el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>bindingFn <span class="token operator">=</span> binding<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> len <span class="token operator">=</span> nodeList<span class="token punctuation">.</span>length

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">===</span> el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">delete</span> el<span class="token punctuation">[</span>ctx<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>编写颜色入口小方块逻辑，控制面板的显隐状态，以及对<code>style</code>进行更改以便动态改变背景颜色</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ColorPicker.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colorPicker<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>closePanel<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(e) =&gt; e.stopPropagation()<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 颜色选择入口 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker-btn<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: showColor, ...btnStyle }<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openPanel<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    .....
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> click <span class="token keyword">from</span> <span class="token string">'../utils/utils'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'color-picker'</span><span class="token punctuation">,</span>

  <span class="token comment">// 自定义 v-click命令</span>
  directives<span class="token operator">:</span> <span class="token punctuation">{</span> click <span class="token punctuation">}</span><span class="token punctuation">,</span>

  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前选中的颜色值</span>
    value<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 默认颜色</span>
    defaultColor<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#f5f5f5'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    btnStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 颜色面板显隐</span>
      visible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

      <span class="token comment">// 自定入口按钮样式</span>
      btnStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 展示当前选中的颜色值</span>
    <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultColor
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">openPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">closePanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>接下来编写颜色面板的具体逻辑，首先给<code>主题颜色</code>以及<code>标准颜色</code>设置一些常用的默认值，并渲染出来；编写<code>gradientValue</code>函数计算渐变过渡颜色，<code>hexToRgb</code>将 hex 格式的颜色值转换为 rgb 值，<code>rgbToHex</code>函数将 rgb 格式的颜色值转换为 hex 值，<code>parseColor</code>格式化 hex 颜色值。</p></li> <li><p>接下来实现点击选中方块的颜色值并将选中的值返回给父元素，以及<code>更多颜色</code>根据不同的格式值来获取用户输入的颜色值，这里使用的是 HTML5 新增的对象—<a href="https://www.w3school.com.cn/jsref/dom_obj_color.asp" target="_blank" rel="noopener noreferrer">Color 对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><img src="/assets/img/color-panel.f009fdab.gif" alt="loading error"></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ColorPicker.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colorPicker<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">v-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>closePanel<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(e) =&gt; e.stopPropagation()<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 颜色选择入口 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zs-color-picker-btn<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: showColor, ...btnStyle }<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openPanel<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 颜色选择面板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
        <span class="token punctuation">'</span>zs-color-picker-panel<span class="token punctuation">'</span>,
        visible ? <span class="token punctuation">'</span>zs-color-picker-panel__visible<span class="token punctuation">'</span> : <span class="token punctuation">'</span><span class="token punctuation">'</span>,
      ]<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-view<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`background-color: ${showPanelColor}`<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-color<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@mouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = defaultColor<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@mouseout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = null<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleDefaultColor<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>
          默认颜色
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>主题颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(color, index) of tColor<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: color }<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@mouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = color<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@mouseout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = null<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updataValue(color)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>standard-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) of colorPanel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
                <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(color, cindex) of item<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cindex<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: color }<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">@mouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = color<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">@mouseout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = null<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updataValue(color)<span class="token punctuation">&quot;</span></span>
              <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>标准颜色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme-color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(color, index) of bColor<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: color }<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@mouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = color<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@mouseout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hoveColor = null<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updataValue(color)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>triggerHtml5Color<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
          更多颜色...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- HTML DOM Color 对象 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html5Color<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html5Color<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updataValue(html5Color)<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> click <span class="token keyword">from</span> <span class="token string">'../utils/utils'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'color-picker'</span><span class="token punctuation">,</span>

  <span class="token comment">// 自定义 v-click命令</span>
  directives<span class="token operator">:</span> <span class="token punctuation">{</span> click <span class="token punctuation">}</span><span class="token punctuation">,</span>

  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前选中的颜色值</span>
    value<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 默认颜色</span>
    defaultColor<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 入口按钮样式</span>
    btnStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 颜色面板显隐</span>
      visible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

      <span class="token comment">// 鼠标经过的颜色块</span>
      hoveColor<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

      <span class="token comment">// 用户输入的颜色值</span>
      html5Color<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>

      <span class="token comment">// 主题颜色</span>
      tColor<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'#000000'</span><span class="token punctuation">,</span>
        <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
        <span class="token string">'#eeece1'</span><span class="token punctuation">,</span>
        <span class="token string">'#1e497b'</span><span class="token punctuation">,</span>
        <span class="token string">'#4e81bb'</span><span class="token punctuation">,</span>
        <span class="token string">'#e2534d'</span><span class="token punctuation">,</span>
        <span class="token string">'#9aba60'</span><span class="token punctuation">,</span>
        <span class="token string">'#8165a0'</span><span class="token punctuation">,</span>
        <span class="token string">'#47acc5'</span><span class="token punctuation">,</span>
        <span class="token string">'#f9974c'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>

      <span class="token comment">// 颜色面板</span>
      colorConfig<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">'#7f7f7f'</span><span class="token punctuation">,</span> <span class="token string">'#f2f2f2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#0d0d0d'</span><span class="token punctuation">,</span> <span class="token string">'#808080'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#1c1a10'</span><span class="token punctuation">,</span> <span class="token string">'#ddd8c3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#0e243d'</span><span class="token punctuation">,</span> <span class="token string">'#c6d9f0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#233f5e'</span><span class="token punctuation">,</span> <span class="token string">'#dae5f0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#632623'</span><span class="token punctuation">,</span> <span class="token string">'#f2dbdb'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#4d602c'</span><span class="token punctuation">,</span> <span class="token string">'#eaf1de'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#3f3150'</span><span class="token punctuation">,</span> <span class="token string">'#e6e0ec'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#1e5867'</span><span class="token punctuation">,</span> <span class="token string">'#d9eef3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">'#99490f'</span><span class="token punctuation">,</span> <span class="token string">'#fee9da'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>

      <span class="token comment">// 标准颜色</span>
      bColor<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'#c21401'</span><span class="token punctuation">,</span>
        <span class="token string">'#ff1e02'</span><span class="token punctuation">,</span>
        <span class="token string">'#ffc12a'</span><span class="token punctuation">,</span>
        <span class="token string">'#ffff3a'</span><span class="token punctuation">,</span>
        <span class="token string">'#90cf5b'</span><span class="token punctuation">,</span>
        <span class="token string">'#00af57'</span><span class="token punctuation">,</span>
        <span class="token string">'#00afee'</span><span class="token punctuation">,</span>
        <span class="token string">'#0071be'</span><span class="token punctuation">,</span>
        <span class="token string">'#00215f'</span><span class="token punctuation">,</span>
        <span class="token string">'#72349d'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 显示面板颜色</span>
    <span class="token function">showPanelColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hoveColor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hoveColor
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showColor
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 展示当前选中的颜色值</span>
    <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultColor
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 颜色面板</span>
    <span class="token function">colorPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> colorArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> color <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colorConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        colorArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gradientValue</span><span class="token punctuation">(</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> colorArr
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">openPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">closePanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">triggerHtml5Color</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>html5Color<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 设置默认颜色</span>
    <span class="token function">handleDefaultColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updataValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultColor<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 更新组件的值 value</span>
    <span class="token function">updataValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 计算渐变过渡颜色</span>
    <span class="token function">gradientValue</span><span class="token punctuation">(</span><span class="token parameter">startColor<span class="token punctuation">,</span> endColor<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 讲 hex 转换为 rgb</span>
      <span class="token keyword">const</span> sColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hexToRgb</span><span class="token punctuation">(</span>startColor<span class="token punctuation">)</span>
      <span class="token keyword">const</span> eColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hexToRgb</span><span class="token punctuation">(</span>endColor<span class="token punctuation">)</span>

      <span class="token comment">// 计算R\G\B每一步的差值</span>
      <span class="token keyword">const</span> rStep <span class="token operator">=</span> <span class="token punctuation">(</span>eColor<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> sColor<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> step
      <span class="token keyword">const</span> gStep <span class="token operator">=</span> <span class="token punctuation">(</span>eColor<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> sColor<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> step
      <span class="token keyword">const</span> bStep <span class="token operator">=</span> <span class="token punctuation">(</span>eColor<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> sColor<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> step

      <span class="token keyword">const</span> gradientColorArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// 计算每一步的hex值</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> step<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        gradientColorArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">rgbToHex</span><span class="token punctuation">(</span>
            <span class="token function">parseInt</span><span class="token punctuation">(</span>rStep <span class="token operator">*</span> i <span class="token operator">+</span> sColor<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">parseInt</span><span class="token punctuation">(</span>gStep <span class="token operator">*</span> i <span class="token operator">+</span> sColor<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">parseInt</span><span class="token punctuation">(</span>bStep <span class="token operator">*</span> i <span class="token operator">+</span> sColor<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> gradientColorArr
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// RGB 颜色 转 HEX 颜色</span>
    <span class="token function">rgbToHex</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> hex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">&lt;&lt;</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>g <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>hex<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> hex
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// HEX 转 RGB 颜色</span>
    <span class="token function">hexToRgb</span><span class="token punctuation">(</span><span class="token parameter">hex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span>hex<span class="token punctuation">)</span>
      <span class="token keyword">const</span> rgb <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'0x'</span> <span class="token operator">+</span> hex<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> rgb
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 格式化 hex 颜色值</span>
    <span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token parameter">hexStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hexStr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hexStr <span class="token operator">=</span>
          <span class="token string">'#'</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span>
          hexStr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hexStr
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ColorPicker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ColorPicker <span class="token keyword">from</span> <span class="token string">'./components/ColorPicker'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    ColorPicker<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>本质就是基于css绝对定位布局进行一个颜色预设值的选择，再提供一个input 框调用HTML5的<code>Color对象</code>的接口获取用户的颜色输入值，在返回给组件。</p> <p><a href="https://github.com/ZhengMaster2020/material-depot/tree/master/projects/color-picker" target="_blank" rel="noopener noreferrer">完整项目地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ZhengMaster2020/material-depot/edit/master/docs/pages/projects/color-picker.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/24/2021, 3:55:05 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f276fa7e.js" defer></script><script src="/assets/js/2.9e11fcbd.js" defer></script><script src="/assets/js/5.2aa81deb.js" defer></script>
  </body>
</html>
